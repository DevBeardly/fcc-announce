<% include ../partials/admin-header %>

<div class="container">
  <div class="row">
    <div class="col-md-3 sidebar">
      <nav class="sidebar-nav">
        <div class="sidebar-header">
          <button class="nav-toggler nav-toggler-md sidebar-toggler" type="button" data-toggle="collapse" data-target="#nav-toggleable-md">
            <span class="sr-only">Toggle nav</span>
          </button>
          <a class="sidebar-brand img-responsive" href="../">
            <span class="icon icon-leaf sidebar-brand-icon"></span>
          </a>
        </div>

        <div class="collapse nav-toggleable-md" id="nav-toggleable-md">
          <!-- <form class="sidebar-form">
            <input class="form-control" type="text" placeholder="Search...">
            <button type="submit" class="btn-link">
              <span class="icon icon-magnifying-glass"></span>
            </button>
          </form> -->
          <ul class="nav nav-pills nav-stacked flex-column">
            <li class="nav-header">Admin</li>
            <!-- <li class="nav-item">
              <a class="nav-link " href="../admin">Overview</a>
            </li> -->
            <li class="nav-item">
              <a class="nav-link active" href="../admin/announcements">Announcements</a>
            </li>
            <!-- <li class="nav-item">
              <a class="nav-link "href="../admin/groups">Groups</a>
            </li> -->
            <!-- <li class="nav-item">
              <a class="nav-link " href="../admin/connect">Connect</a>
            </li> -->
            <% if (currentUser.isAdmin) { %>
              <li class="nav-item">
                <a class="nav-link "href="../admin/users">
                  Users
                </a>
              </li>
            <% } %>

            <li class="nav-header">User</li>
              <li class="nav-item">
                <a class="nav-link" href="../user">
                  Personal Profile
                </a>
              </li>
              <li class="nav-item"><a class="nav-link" href="../logout">Logout</a></li>
          </ul>
          <hr class="visible-xs mt-3">
        </div>
      </nav>
    </div>
    <div class="col-md-9 content">
      <div class="dashhead">
<div class="dashhead-titles">
  <h6 class="dashhead-subtitle">Admin</h6>
  <h2 class="dashhead-title">Announcements</h2>
</div>

<div class="btn-toolbar dashhead-toolbar">
    <div class="btn-toolbar-item">
      <a href="../announcements/new">
        <button type="text" class="btn btn-outline-primary">
          <span class="icon icon-circle-with-plus"></span>
        </button>
      </a>
    </div>
  </div>
  </div>

<!-- <div class="flextable table-actions">
<div class="flextable-item flextable-primary">
  <div class="btn-toolbar-item input-with-icon">
    <input type="text" class="form-control input-block" placeholder="Search orders">
    <span class="icon icon-magnifying-glass"></span>
  </div>
</div>
<div class="flextable-item">
  <div class="btn-group">
    <button type="button" class="btn btn-outline-primary">
      <span class="icon icon-pencil"></span>
    </button>
    <button type="button" class="btn btn-outline-primary">
      <span class="icon icon-erase"></span>
    </button>
  </div>
</div>
</div> -->

<div class="table-responsive">
<table class="table" data-sort="table">
  <thead>
    <tr>
      <!-- <th><input type="checkbox" class="select-all" id="selectAll"></th> -->
      <th>Title</th>
      <th>Author</th>
      <th>Date Updated</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% announcements.forEach(function(announcement){ %>
    <tr>
      <!-- <td><input type="checkbox" class="select-row"></td> -->
      <td><%= announcement.title %></td>
      <td><%= announcement.author.fullname %></td>
        <% var year = announcement.dateUpdated.getFullYear().toString() %>
        <% var date = (announcement.dateUpdated.getMonth() + 1) + '/' + announcement.dateUpdated.getDate() + '/' + year.substring(2,4) %>
      <td><%= date %></td>
      <!-- <td><%= announcement.dateUpdated.toDateString() %></td> -->
      <td>
        <div class="btn-group">
          <a href="../announcements/<%= announcement._id %>/edit">
            <button type="button" class="btn btn-outline-primary edit-button">
              <span class="icon icon-pencil"></span>
            </button>
          </a>
          <% if (currentUser.isAdmin) { %>
            <% if (announcement.isApproved) { %>
              <a href="../announcements/<%= announcement._id %>/unapprove">
                <button type="button" class="btn btn-outline-primary center-button">
                  <span class="icon icon-block"></span>
                </button>
              </a>
            <% } else { %>
              <a href="../announcements/<%= announcement._id %>/approve">
                <button type="button" class="btn btn-outline-primary center-button">
                  <span class="icon icon-check"></span>
                </button>
              </a>
            <% } %>
          <% } %>
          <% if (announcement.isPublished) { %>
            <a href="../announcements/<%= announcement._id %>/unpublish">
              <button type="button" class="btn btn-outline-primary center-button">
                <span class="icon icon-controller-paus"></span>
              </button>
            </a>
          <% } else if ((currentUser.isEditor && announcement.isApproved) || currentUser.isAdmin) { %>
            <a href="../announcements/<%= announcement._id %>/publish">
              <button type="button" class="btn btn-outline-primary center-button">
                <span class="icon icon-controller-play"></span>
              </button>
            </a>
          <% } %>
          <form action="/announcements/<%= announcement._id %>?_method=DELETE" method="POST">
            <button type="submit" class="btn btn-outline-primary delete-button">
              <span class="icon icon-erase"></span>
            </button>
          </form>
        </div>
      </td>
    </tr>
    <% }); %>
  </tbody>
</table>
</div>

<!-- <div class="text-center">
<nav>
  <ul class="pagination">
    <li class="page-item">
      <a class="page-link" href="#" aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
        <span class="sr-only">Previous</span>
      </a>
    </li>
    <li class="page-item active"><a class="page-link" href="#">1</a></li>
    <li class="page-item"><a class="page-link" href="#">2</a></li>
    <li class="page-item"><a class="page-link" href="#">3</a></li>
    <li class="page-item"><a class="page-link" href="#">4</a></li>
    <li class="page-item"><a class="page-link" href="#">5</a></li>
    <li class="page-item">
      <a class="page-link" href="#" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
        <span class="sr-only">Next</span>
      </a>
    </li>
  </ul>
</nav>
</div> -->

    </div>
  </div>
</div>

<div id="docsModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
<div class="modal-dialog">
  <div class="modal-content">

    <div class="modal-header">
      <h4 class="modal-title" id="myModalLabel">Example modal</h4>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    </div>
    <div class="modal-body">
      <p>You're looking at an example modal in the dashboard theme.</p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-primary" data-dismiss="modal">Cool, got it!</button>
    </div>
  </div>
</div>
</div>


  <script src="/js/jquery.min.js"></script>
  <script src="/js/tether.min.js"></script>
  <script src="/js/chart.js"></script>
  <script src="/js/tablesorter.min.js"></script>
  <script src="/js/toolkit.js"></script>
  <script src="/js/application.js"></script>
  <script>
    // execute/clear BS loaders for docs
    $(function(){while(window.BS&&window.BS.loader&&window.BS.loader.length){(window.BS.loader.pop())()}})
  </script>

<% include ../partials/footer %>
